{% extends "base.html" %}

{% block title %}欠料單{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>欠料單</h1>
    <p>訂單號碼: {{ requisition.order_number }}</p>
    <p>申請人: {{ requisition.applicant.username }}</p>
    <p>需求流程: {{ requisition.process_type }}</p>
    <p>需求日期: {{ requisition.request_date }}</p>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>物料號碼</th>
                <th>品名</th>
                <th>需求數量</th>
                <th>已撥料數量</th>
                <th>欠料數量</th>
                <th>儲格</th>
                <th>庫存</th>
            </tr>
        </thead>
        <tbody>
            {% for material in shortage_materials %}
            <tr>
                <td>{{ material.material_number }}</td>
                <td>{{ material.item_name }}</td>
                <td>{{ material.required_quantity }}</td>
                <td>{{ material.confirmed_quantity|default_if_none:0 }}</td>
                <td>{{ material.shortage_quantity }}</td>
                <td>{{ material.storage_bin|default_if_none:"" }}</td>
                <td>{{ material.stock_quantity|default_if_none:"" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
